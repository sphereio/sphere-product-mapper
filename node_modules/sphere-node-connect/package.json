{
  "name": "sphere-node-connect",
  "description": "Quick and easy way to connect your Node.js app with SPHERE.IO.",
  "version": "0.3.0",
  "keywords": [
    "sphere",
    "api",
    "connect",
    "oauth",
    "oauth2"
  ],
  "homepage": "https://github.com/emmenko/sphere-node-connect",
  "author": {
    "name": "Nicola Molinari",
    "email": "nicola.molinari@commercetools.de"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/emmenko/sphere-node-connect.git"
  },
  "bugs": {
    "url": "https://github.com/emmenko/sphere-node-connect/issues"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://github.com/emmenko/sphere-node-connect/blob/master/LICENSE-MIT"
    }
  ],
  "main": "./lib/main",
  "engines": {
    "node": ">= 0.8.0"
  },
  "scripts": {
    "build": "grunt build",
    "postpublish": "rm -rf lib",
    "test": "grunt coverage"
  },
  "dependencies": {
    "request": "~2.33.0",
    "underscore": "~1.5.2"
  },
  "devDependencies": {
    "coveralls": "~2.7.0",
    "grunt": "~0.4.2",
    "grunt-bump": "~0.0.13",
    "grunt-coffeelint": "~0.0.8",
    "grunt-contrib-clean": "~0.5.0",
    "grunt-contrib-coffee": "~0.10.0",
    "grunt-contrib-concat": "~0.3.0",
    "grunt-contrib-watch": "~0.5.3",
    "grunt-shell": "~0.6.4",
    "istanbul": "~0.2.4",
    "jasmine-node": "~1.13.1"
  },
  "readme": "# sphere-node-connect\n\n[![Build Status](https://secure.travis-ci.org/emmenko/sphere-node-connect.png?branch=master)](http://travis-ci.org/emmenko/sphere-node-connect) [![NPM version](https://badge.fury.io/js/sphere-node-connect.png)](http://badge.fury.io/js/sphere-node-connect) [![Coverage Status](https://coveralls.io/repos/emmenko/sphere-node-connect/badge.png?branch=master)](https://coveralls.io/r/emmenko/sphere-node-connect?branch=master) [![Dependency Status](https://david-dm.org/emmenko/sphere-node-connect.png?theme=shields.io)](https://david-dm.org/emmenko/sphere-node-connect) [![devDependency Status](https://david-dm.org/emmenko/sphere-node-connect/dev-status.png?theme=shields.io)](https://david-dm.org/emmenko/sphere-node-connect#info=devDependencies)\n\nQuick and easy way to connect your Node.js app with [SPHERE.IO](http://sphere.io).\n\n## Getting Started\nInstall the module with: `npm install sphere-node-connect`\n\n```javascript\nvar sphere_connect = require('sphere-node-connect');\nvar oa = sphere_connect.OAuth2;\nvar rest = sphere_connect.Rest;\n```\n\n## Documentation\nThe connector exposes 2 objects: `OAuth2` and `Rest`.\n\nThe `OAuth2` is used to retrieve an `access_token`\n\n```javascript\nvar oa = new OAuth2({\n  config: {\n    client_id: \"\",\n    client_secret: \"\",\n    project_key: \"\"\n  },\n  host: \"auth.sphere.io\", // optional\n  accessTokenUrl: \"/oauth/token\" // optional,\n  timeout: 20000, // optional\n  rejectUnauthorized: true // optional\n});\noa.getAccessToken(callback)\n```\n\nThe `Rest` is used to comunicate with the HTTP API.\n\n```javascript\nvar rest = new Rest({\n  config: {\n    client_id: \"\",\n    client_secret: \"\",\n    project_key: \"\"\n  },\n  host: \"api.sphere.io\", // optional\n  access_token: \"\", // optional (if not provided it will automatically retrieve an access_token)\n  timeout: 20000, // optional\n  rejectUnauthorized: true, // optional\n  oauth_host: \"auth.sphere.io\" // optional (used when retrieving the access_token internally)\n  user_agent: 'my client v0.1' // optional\n});\n\nrest.GET(resource, callback)\nrest.POST(resource, payload, callback)\n```\n\nThe `Rest` object, when instantiated, has an internal instance of the `OAuth` module accessible with `rest._oauth`. This is mainly used internally to automatically retrieve an `access_token`.\n\nCurrently `GET`, `POST` and `DELETE` are supported.\n\n\n### Error handling\nSince the connector is basically a wrapper of the [`request`](https://github.com/mikeal/request#requestoptions-callback) HTTP Client, the `callback` function comes directly from there, meaning that the 3 arguments are the same:\n\n- `error`: an error object when applicable (usually from [`http.ClientRequest`](http://nodejs.org/api/http.html#http_class_http_clientrequest) object) otherwise `null`\n- `response`: an [`http.IncomingMessage`](http://nodejs.org/api/http.html#http_http_incomingmessage) object containing all kind of information about the request / response\n- `body`: a JSON object (automatically parsed)\n\nAs the SPHERE.IO [HTTP API](http://commercetools.de/dev/http-api.html) returns JSON responses either with resources or [error messages](http://commercetools.de/dev/http-api-projects-errors.html), the application should check the response `statusCode` and decide what to do.\nIt's always a good practice to check first for the existence of an `error` object in case there was a problem with the http client request.\n\n```javascript\nfunction(error, response, body) {\n  if (error) {\n    // do something\n  }\n\n  if (response.statusCode == 200) {\n    // ok\n  } else {\n    // do something else\n  }\n}\n```\n\n\n## Examples\n```javascript\noa.getAccessToken(function(error, response, body){\n  if (response.statusCode is 200) {\n    var access_token = body.access_token;\n  } else\n    throw new Error(\"Failed to get Access Token.\")\n})\n```\n\n```javascript\n// Get a list of all products\nrest.GET(\"/products\", function(error, response, body){\n  console.log(body);\n});\n\n// Create a new product\nrest.POST(\"/products\", {\n  name: { en: \"Foo\" },\n  slug: { en: \"foo\" },\n  productType: { id: \"123\", typeId: \"product-type\" }\n}, function(error, response, body){\n  console.log(body);\n});\n\n// Update a product\nrest.POST(\"/products/123\", {\n  version: 1,\n  actions: [\n    { action: \"changeName\", name: { en: \"Boo\" } }\n  ]\n}, function(error, response, body){\n  console.log(body);\n});\n\n// Delete a product\nrest.DELETE(\"/product/abc?version=3\", function(error, response, body) {\n  if (response.statusCode == 200) {\n    console.log(\"Product successfully deleted.\");\n  } else if (response.statusCode == 404) {\n    console.log(\"Product does not exist.\");\n  } else if (response.statusCode == 400) {\n    console.log(\"Product version does not match.\");\n  }\n});\n```\n\n## Contributing\nIn lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using [Grunt](http://gruntjs.com/).\n\nDefine your SPHERE.IO credentials into a `config.js`. Since the tests run against 2 projects on different environments you need to provide the credentials for both. If you just have one project You can provide the same credentials for both.\n\n```javascript\n/* SPHERE.IO credentials */\nexports.config = {\n  staging: {\n    client_id: \"\",\n    client_secret: \"\",\n    project_key: \"\",\n    oauth_host: \"auth.sphere.io\",\n    api_host: \"api.sphere.io\"\n  },\n  prod: {\n    client_id: \"\",\n    client_secret: \"\",\n    project_key: \"\",\n    oauth_host: \"auth.sphere.io\",\n    api_host: \"api.sphere.io\"\n  }\n}\n```\n\n## Releasing\nReleasing a new version is completely automated using the Grunt task `grunt release`.\n\n```javascript\ngrunt release // patch release\ngrunt release:minor // minor release\ngrunt release:major // major release\n```\n\n## Styleguide\nWe <3 CoffeeScript! So please have a look at this referenced [coffeescript styleguide](https://github.com/polarmobile/coffeescript-style-guide) when doing changes to the code.\n\n## License\nCopyright (c) 2013 Nicola Molinari\nLicensed under the MIT license.\n",
  "readmeFilename": "README.md",
  "_id": "sphere-node-connect@0.3.0",
  "_from": "sphere-node-connect@0.3.0"
}
